<!DOCTYPE html>
<html>
<head>
    <title>4 Pics, 1 Word Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: url(Background.png);
            padding: 20px;
        }
        .container {
            background: #fff;
            padding: 40px; 
            border-radius: 20px;
            border: 8px solid #ff5e62; 
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            max-width: 90vw; 
            max-height: 90vh; 
            margin: auto;
            display: none; 
        }
        #rules-container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #FFC0CB;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            margin: auto;
        }
        #username-container {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #FFC0CB;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            margin: auto;
        }
        input, button {
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            width: 80%;
        }
        button {
            background-color: #ff5e62;
            color: white;
            cursor: pointer;
            border: none;
            font-weight: bold;
        }
        button:hover {
            background-color: #ff3b47;
        }
        .image-grid {
            display: flex;
            flex-wrap: wrap; 
            justify-content: center;
            gap: 15px; 
        }
        .image-grid img {
            width: 180px; 
            height: 180px;
            margin: 10px;
            border: 6px solid #ff5e62; 
            border-radius: 15px;
        }
        ul {
            text-align: left;
            display: inline-block;
            padding: 10px;
        }
        ul li {
            margin: 5px 0;
            font-weight: bold;
        }
        /* Center the Next Round button */
        #next-round-btn {
            margin: 20px auto 0;
            display: block;
            width: 80%;
        }
    </style>
</head>
<body>

    <div id="rules-container">
        <h1>4 Pics, 1 Word!</h1>
        <p>Guess the word that connects the four images.</p>

        <h2>Game Rules:</h2>
        <ul>
            <li>You will see 4 images that hint at a common word.</li>
            <li>Type your answer in the input box and submit.</li>
            <li>Each correct answer gives you points.</li>
            <li>You can use hints but they cost points.</li>
        </ul>
    </div>

    <div id="username-container">
        <h2>Enter Your Username</h2>
        <form onsubmit="saveUsername(); return false;">
            <input type="text" id="username" placeholder="Enter username" required>
            <button type="submit">Start Game</button>
        </form>
        <p id="greeting"></p>
    </div>

    <div id="game-container" class="container">
        <div class="image-grid">
            <img id="img1" src="" alt="Image 1">
            <img id="img2" src="" alt="Image 2">
            <img id="img3" src="" alt="Image 3">
            <img id="img4" src="" alt="Image 4">
        </div>

        <form onsubmit="checkAnswer(); return false;">
            <input type="text" id="answer-input" placeholder="Your Answer" required>
            <button type="submit">Submit</button>
        </form>
        
        <button onclick="useHint()">Hint (-1 pt)</button>
        <p id="feedback"></p>
        <p>Score: <span id="score">0</span></p>
        <button id="next-round-btn" onclick="nextRound()">Next Round</button>
    </div>

    <script>
        let currentLevel = "easy";
        let currentRound = 0;
        let score = 0;

        const levels = {
            easy: [
                { images: ["EASY/img1.jpg", "EASY/img2.jpg", "EASY/img3.jpg", "EASY/img4.jpg"], answer: "movie", hint: "For entertainment" },
                { images: ["EASY/img5.jpg", "EASY/img6.jpg", "EASY/img7.jpg", "EASY/img8.jpg"], answer: "photo", hint: "Taken by camera" }
            ],
            medium: [
                { images: ["MEDIUM/img9.jpg", "MEDIUM/img10.jpg", "MEDIUM/img11.jpg", "MEDIUM/img12.jpg"], answer: "patch", hint: "Cover up for wound" },
                { images: ["MEDIUM/img13.jpg", "MEDIUM/img14.jpg", "MEDIUM/img15.jpg", "MEDIUM/img16.jpg"], answer: "bunch", hint: "A group" }
            ],
            hard: [
                { images: ["HARD/img17.jpg", "HARD/img18.jpg", "HARD/img19.jpg", "HARD/img20.jpg"], answer: "cloth", hint: "Wearable" },
                { images: ["HARD/img21.jpg", "HARD/img22.jpg", "HARD/img23.jpg", "HARD/img24.jpg"], answer: "light", hint: "Bright" }
            ],
            extreme: [
                { images: ["EXTREME/img25.jpg", "EXTREME/img26.jpg", "EXTREME/img27.jpg", "EXTREME/img28.jpg"], answer: "shadow", hint: "Opposite of light" },
                { images: ["EXTREME/img29.jpg", "EXTREME/img30.jpg", "EXTREME/img31.jpg", "EXTREME/img32.jpg"], answer: "island", hint: "Paradise" },
                { images: ["EXTREME/img33.jpg", "EXTREME/img34.jpg", "EXTREME/img35.jpg", "EXTREME/img36.jpg"], answer: "battle", hint: "Combat" }
            ]
        };

        // Function to set a cookie with a specified expiration (in days)
        function setCookie(name, value, days) {
            let date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            let expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/";
            
            // Log the expiration date, current day and month in the console
            console.log("Cookie set:");
            console.log("Name:", name);
            console.log("Value:", value);
            console.log("Expiration Date:", date.toUTCString());
            console.log("Current Day:", date.getDate());
            console.log("Current Month:", date.getMonth() + 1);
        }

        function saveUsername() {
            let username = document.getElementById("username").value.trim();
            if (username) {
                localStorage.setItem("username", username);
                setCookie("username", username, 30);
                document.getElementById("greeting").textContent = "Welcome, " + username + "!";
                showGameScreen();
            }
        }

        function showGameScreen() {
            document.getElementById("username-container").style.display = "none"; 
            document.getElementById("rules-container").style.display = "none";
            document.getElementById("game-container").style.display = "block"; 
            loadRound();
        }

        function loadRound() {
            // Start game alert only on the very first round
            if(currentRound === 0) {
                alert('Let\'s start the game!');
            }
            let round = levels[currentLevel][currentRound];
            document.getElementById("img1").src = round.images[0];
            document.getElementById("img2").src = round.images[1];
            document.getElementById("img3").src = round.images[2];
            document.getElementById("img4").src = round.images[3];
            document.getElementById("answer-input").value = "";
            document.getElementById("feedback").textContent = "";
            
            // Always show the Next Round button and update its text
            let nextRoundBtn = document.getElementById("next-round-btn");
            nextRoundBtn.style.display = "block";
            if (currentRound >= levels[currentLevel].length - 1) {
                nextRoundBtn.textContent = "Finish Game";
            } else {
                nextRoundBtn.textContent = "Next Round";
            }
        }

        function checkAnswer() {
            let answerInput = document.getElementById("answer-input").value.toLowerCase().trim();
            let correctAnswer = levels[currentLevel][currentRound].answer;
            let feedback = document.getElementById("feedback");

            if (answerInput === correctAnswer) {
                feedback.textContent = "✅ Correct!";
                score += 5;
            } else {
                feedback.textContent = "❌ Try Again!";
            }
            document.getElementById("score").textContent = score;
        }

        function useHint() {
            if (score > 0) {
                score -= 1;
                alert("Hint: " + levels[currentLevel][currentRound].hint);
                document.getElementById("score").textContent = score;
            } else {
                alert("Not enough points for a hint!");
            }
        }

        function nextRound() {
            if (currentRound < levels[currentLevel].length - 1) {
                currentRound++;
                loadRound();
            } else {
                alert("🎉 Game Over! Final Score: " + score);
                resetGame();
            }
        }

        function resetGame() {
            currentLevel = "easy";
            currentRound = 0;
            score = 0;
            document.getElementById("score").textContent = score;
            document.getElementById("username-container").style.display = "block";
            document.getElementById("game-container").style.display = "none";
            document.getElementById("rules-container").style.display = "block";
        }

        let storedUsername = localStorage.getItem("username");
        if (storedUsername) {
            document.getElementById("greeting").textContent = "Welcome back, " + storedUsername + "!";
            document.getElementById("username-container").style.display = "block"; 
            document.getElementById("rules-container").style.display = "block";
            document.getElementById("game-container").style.display = "none";
        }
    </script>
</body>
</html>
